FROM public.ecr.aws/lambda/python:3.11

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1 \
    PIP_NO_CACHE_DIR=1

WORKDIR /var/task

COPY backend/requirements.txt .
RUN pip install -r requirements.txt -t .

COPY backend/app ./app

# Default handler; override per Lambda function in Terraform.
CMD ["app.lambda_handlers.api.lambda_handler"]
