flowchart LR
  User[User on WhatsApp] --> WA[WhatsApp Cloud API]
  WA --> APIGW[API Gateway /webhook]
  APIGW --> WebhookLambda[Webhook Lambda (public)]
  WebhookLambda --> SQSIn[SQS Inbound]
  SQSIn --> WorkerLambda[Worker Lambda (VPC)]
  WorkerLambda --> RDS[(PostgreSQL RDS)]
  WorkerLambda --> SQSOut[SQS Outbound]
  SQSOut --> OutboundLambda[Outbound Lambda (public)]
  OutboundLambda --> WA

  Browser[Web Dashboard] --> ApiGwBackend[API Gateway /api]
  ApiGwBackend --> ApiLambda[API Lambda (VPC)]
  ApiLambda --> RDS

  WebhookLambda --> ParserApi[Text Parser API (Lambda)]
  ParserApi --> Bedrock[Bedrock (Mistral)]
